<div class="span12">        <!-- start submenu -->    <ul class="breadcrumb">        <!--<a href="?mod=agregarempleado" class="icon-plus" title="Ingresar nuevo empleado">&nbsp;Ingresar nuevo empleado</a> &nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;-->        <a href="?mod=permisos" class="icon-folder-open" title="Registros de empleados">&nbsp;Registros de empleados</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;        <a href="?mod=vpermisos" class="icon-folder-close" title="Permisos registrados">&nbsp;Permisos registrados</a> &nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;        <a href="?mod=reportes_permiso" class="icon-file" title="Reportes permisos">&nbsp;Reportes permisos</a>    </ul>    <!-- end submenu-->    <div class="box">        <div class="box-header" data-original-title="">            <h2><i class="halflings-icon white edit"></i><span class="break"></span>Ingreso de Permiso</h2>            <div class="box-icon">                <a href="#" class="btn-minimize"><i class="halflings-icon white chevron-up"></i></a>            </div>        </div>        <div class="box-content">            <form role="form" method="POST" name="frmPermisos" id="frmPermisos" autocomplete="off" enctype="multipart/form-data" onsubmit="return false">                <fieldset>                <div class="form-group span6">                    <label>Nombre completo:</label>                    <input type="text" class="form-control" name="txtNombre" id="txtNombre" readonly>                </div>                <div class="form-group span6">                    <label>DUI: </label>                    <input type="text" class="form-control" name="txtDui" id="txtDui" style="width: 97%;" readonly>                </div>                 </fieldset>                <fieldset>                    <div class="form-group span6">                        <label>N&uacute;mero de permiso:<span style="float:right; margin-left:50px;" id="comprobar"></span></label>                        <input type="number" class="form-control" min="0" name="txtNumeroPermiso" id="txtNumeroPermiso" placeholder="Escriba el número de permiso" data-validation="required" data-validation-error-msg="rellene este campo" data-validation="number">                    </div>                    <div class="form-group span6">                        <label>Motivo: </label>                        <select class="form-control" name="txtmotivo" id="txtmotivo" onchange="tipo_motivo( $('#txtmotivo').val())" style="width: 99.5%;"></select>                    </div>                </fieldset>                <fieldset>                    <div class="form-group span12" id="descripcion_otros" style="display: none;">                        <label>Especificar solo en seleccionar opcion de motivo (otros):</label>                        <input type="text" name="txtotros" id="txtotros" class="form-control" disabled="true">                    </div>                </fieldset>                <fieldset>                    <div class="form-group span6">                        <label>Fecha desde:</label>                        <input type="text" class="form-control" name="dtFechaDesde" id="dtFechaDesde" placeholder="Seleccione una fecha" style="background: #fff;" readonly>                    </div>                    <div class="form-group span6">                        <label>Fecha hasta:</label>                        <input type="text" class="form-control" name="dtFechaHasta" id="dtFechaHasta" placeholder="Seleccione una fecha" style="width: 97%; background: #fff;" readonly>                    </div>                </fieldset>                <fieldset>                <div class="form-group span6">                    <label>Horario desde:</label>                    <input type="text" class="form-control" name="hrDesde" id="hrDesde">                </div>                <div class="form-group span6">                    <label>Horario hasta:</label>                    <input type="text" class="form-control" name="hrAsta" id="hrAsta" style="width: 97%;">                </div>                </fieldset>                <br>                <fieldset>                <div class="form-group span6">                    <label>Fecha de entrega de permiso:</label>                    <input type="text" class="form-control datepicker" name="dtFechaDif" id="dtFechaDif" placeholder="Seleccione una fecha" style="background: #fff;" readonly>                </div>               <div class="form-group span6">                    <label>Permiso anulado:</label>                    <select name="txtAnulacion" id="txtAnulacion" class="form-control" title="Selecciones estado del permiso" style="width: 99.5%;">                        <option value="no">No</option>                        <option value="si">Si</option>                    </select>                </div>                </fieldset>                <fieldset>                <div class="form-group span4">                    <label>Fecha de entrega a RR.HH:</label>                    <input type="text" class="form-control datepicker" name="dtFechaDrh" id="dtFechaDrh" style="background: #fff;" placeholder="Seleccione una fecha" readonly>                </div>                <div class="form-group span4">                    <label>Codigo RR.HH:</label>                    <input type="number" class="form-control" name="codigoDrh" id="codigoDrh" placeholder="Ingrese codígo">                </div>                <div class="form-group span4">                    <label>Documento:</label><br>                    <input type="file" class="form-control" name="txtArchivo[]" id="txtArchivo">                </div>                </fieldset>                <fieldset>                <div class="form-group span12">                    <label>Observación:</label>                    <textarea class="form-control" style="width: 97.5%;" name="txtObservacion" id="txtObservacion" placeholder="Escriba la observación"></textarea>                </div>                </fieldset>                <input type="hidden" id="txtNombreEmpleado" name="txtNombreEmpleado" value="" readonly>                <input type="hidden" id="txtId" name="txtId" value="" disabled="true">                <div class="form-actions">                    <button type="button" id="cancelar" name="cancelar" style="margin-right: 5px;" class="btn btn-primary btn-danger pull-left" onClick='location.href="?mod=permisos"'>Cancelar</button>                    <button type="reset" id="limpiar" name="limpiar" class="btn btn-primary pull-left">Limpiar</button>                    <button type="submit" id="guardar" name="guardar" class="btn btn-primary pull-right">Guardar</button>                </div>            </form>            <!--/span-->        </div>    </div></div><script type="text/javascript">// Funcion que permite tomar variables que vienen por metodo getfunction getGET(){    var loc = document.location.href;    if(loc.indexOf('?')>0){        var getString = loc.split('?')[1];        var GET = getString.split('&');        var get = {};        for(var i = 0, l = GET.length; i < l; i++){            var tmp = GET[i].split('=');            get[tmp[0]] = unescape(decodeURI(tmp[1]));        }        return get;    }}//Declaracion de variable globalvar get = getGET();//Funcion que nos asignarle un permiso a un empleadowindow.onload = function(){    if (get.ida) {        $.ajax({            type: 'POST',            dataType: 'json',            url: 'procesos/store_info_empleado.php',            data: { 'id_empleado' : get.ida },        }).done(function (response) {            if(response.total > 0 && get.ida > 0) {                data = response.items;                document.getElementById('txtNombreEmpleado').value = data[0].id_empleado;                document.getElementById('txtNombre').value = data[0].nombre+' '+data[0].apellido;                document.getElementById('txtDui').value = data[0].DUI;            }        });    }}//Funcion que nos permitira llenar el formulario con los datos del permiso para poder modificarlos$(document).ready(function() {       if (get.idm) {        $.ajax({            type: 'POST',            dataType: 'json',            url: 'procesos/store_info_permiso.php',            data: { 'id_permiso' : get.idm },        }).done(function (response) {            if(response.total > 0 && get.idm > 0) {                data = response.items;                document.getElementById('txtNombreEmpleado').value = data[0].id_empleado;                document.getElementById('txtNombre').value = data[0].nombre_completo;                document.getElementById('txtDui').value = data[0].DUI;                 document.getElementById('txtId').disabled = false;                document.getElementById('txtId').value = data[0].id_permiso;                document.getElementById('txtNumeroPermiso').value = data[0].num_permiso;                  document.getElementById('txtmotivo').value = data[0].id_motivo;                 tipo_motivo(data[0].id_motivo);                   store_motivo(data[0].id_motivo);                document.getElementById('txtotros').value = data[0].motivo_otros;                document.getElementById('dtFechaDesde').value = data[0].fecha_desde;                document.getElementById('dtFechaHasta').value = data[0].fecha_hasta;                document.getElementById('hrDesde').value = data[0].hora_desde;                document.getElementById('hrAsta').value = data[0].hora_hasta;                document.getElementById('dtFechaDif').value = data[0].fecha_dif;                        document.getElementById('txtAnulacion').value = data[0].anulacion;                       document.getElementById('dtFechaDrh').value = data[0].fecha_drh;                document.getElementById('codigoDrh').value = data[0].codigo_rrhh;                document.getElementById('txtObservacion').value = data[0].observacion;                }        });    }});//Funcion para  validar numero de permiso$(document).ready(function() {        $('#txtNumeroPermiso').blur(function(){            $('#comprobar').fadeOut(80);        var Codigo = $(this).val();                var dataString = 'txtNumeroPermiso='+Codigo;        $.ajax({            type: "POST",            url: "procesos/validar_num_permiso.php",            data: dataString,            success: function(data) {                $('#comprobar').fadeIn(1000).html(data);                             }        });    });              });$(function () {    $.mask.definitions['~'] = "[+-]";    $("#hrDesde").mask("99:99:99");    $("#hrAsta").mask("99:99:99");});//Funcion para bloquear y desbloquear campo de descripcion de opcion otros en combo motivofunction tipo_motivo(id_motivo){    if (id_motivo == 5) {        document.getElementById('txtotros').disabled = false;        $('#descripcion_otros').show();        document.getElementById('descripcion_otros').style.display = 'block';    }else{        document.getElementById('txtotros').disabled = true;        $('#descripcion_otros').hide();        document.getElementById('descripcion_otros').style.display = 'none';    }}$(document).ready(function () {    $('#descripcion_otros').hide();});// Funcion que nos permitira cargar el combo de motivosfunction store_motivo(id_motivo){    $.post("procesos/store_motivo.php",         function(data){        var data=JSON.parse(data);        var resultado=data.items;        var total=resultado.length;        var opciones='<option value="">Seleccione un motivo</option>';        for(var i=0; i<total; i++){            if (resultado[i].id_motivo == id_motivo) {                opciones+="<option selected value='"+resultado[i].id_motivo+"'>"+resultado[i].motivo+"</option>";            }else{                opciones+="<option value='"+resultado[i].id_motivo+"'>"+resultado[i].motivo+"</option>";            }        }        $('#txtmotivo').html(opciones);    });  }$(document).ready(function () {    store_motivo(0);});//funcion para validar que las fechas $(function() {    $( "#dtFechaDesde" ).datepicker({        defaultDate: "+1w",        changeMonth: true,        changeYear: true,        numberOfMonths: 1,        onClose: function( selectedDate ) {            $( "#dtFechaHasta" ).datepicker( "option", "minDate", selectedDate );            $('#dtFechaHasta').datepicker('option', {dateFormat: 'yy-mm-dd'});        }    });    $( "#dtFechaHasta" ).datepicker({        defaultDate: "+1w",        maxDate: "+1Y",        changeMonth: true,        changeYear: true,        numberOfMonths: 1,        onClose: function( selectedDate ) {            $( "#dtFechaDesde" ).datepicker( "option", "maxDate", selectedDate );            $('#dtFechaDesde').datepicker('option', {dateFormat: 'yy-mm-dd'});        }    });});//Funcion para almacenar los datos en nuestra bd$(document).ready(function () {    $('#guardar').click(function () {        var select_emple = document.getElementById("txtNombreEmpleado").value;        if (select_emple != "" || select_emple != null) {            $.validate({                onSuccess : function(form) {                var formulario = document.getElementById("frmPermisos");                var formData = new FormData(formulario);                $.ajax({                    url: "procesos/agregar_permiso.php",                    type: "POST",                    dataType: "Json",                    data: formData,                    cache: false,                    contentType: false,                    processData: false                }).done(function (response) {                    if(response.success == true) {                        bootbox.alert(response.mensaje, function() { location.href = "?mod=permisos"; });                    }else if(response.success == false){                           bootbox.confirm(response.mensaje, function(result){                             if (response.modificar != true) {                                if(result !=false ){                                     bootbox.alert('se ha guardado');                                     guardar_permiso();                                 }else{                                    bootbox.alert('no se ha guardado');                                 }                            }                                                                                 });                     }else{                       location.href = "?mod=permisos";                    }                });            }});        }    });});// Funcion que nos permitira mandar los datos a ingresar sin validacion algunafunction guardar_permiso(){       var formulario = document.getElementById("frmPermisos");    var formData = new FormData(formulario);    $.ajax({        url: "procesos/permisos_no_val.php",        type: "POST",        dataType: "Json",        data: formData,        cache: false,        contentType: false,        processData: false    }).done(function (response) {        if(response.success == true) {            bootbox.alert(response.mensaje, function() { location.href = "?mod=permisos"; });        }else{               bootbox.alert(response.mensaje, function() {  });        }    });}</script>